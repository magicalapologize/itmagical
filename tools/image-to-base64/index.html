<!DOCTYPE html>
<!--
	Dopetrope by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
<head>
    <title>图片转Base64工具 - 云云的工具箱</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta name="description" content="免费在线图片转Base64编码工具，支持JPG、PNG、GIF等格式，支持链接粘贴、截图粘贴，Base64逆转图片功能" />
    <meta name="keywords" content="图片转Base64,Base64编码,图片编码,在线工具,免费工具,图片处理" />
    <link rel="stylesheet" href="../../assets/css/main.css" />
    <style>
        .tool-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .upload-area {
            border: 3px dashed #ccc;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            margin: 20px 0;
            background: #f9f9f9;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .upload-area.dragover {
            border-color: #007acc;
            background: #e6f3ff;
        }
        
        .upload-area:hover {
            border-color: #007acc;
        }
        
        .upload-icon {
            font-size: 48px;
            color: #ccc;
            margin-bottom: 20px;
        }
        
        .tab-container {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .tab-buttons {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #ddd;
        }
        
        .tab-button {
            flex: 1;
            padding: 15px 20px;
            background: #c2185b;
            border: 1px solid #ad1457;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 4px;
            margin-right: 8px;
        }
        
        .tab-button:hover {
            background: #ad1457;
            color: white;
        }
        
        .tab-button.active {
            background: #007acc;
            color: white;
        }
        
        .tab-content {
            padding: 20px;
        }
        
        .tab-pane {
            display: none;
        }
        
        .tab-pane.active {
            display: block;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }
        
        .input-group input[type="text"],
        .input-group input[type="url"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .input-group textarea {
            width: 100%;
            min-height: 200px;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            resize: vertical;
        }
        
        .result-area {
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .result-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .info-card {
            background: #fff;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
            border: 1px solid #e0e0e0;
        }
        
        .info-value {
            font-size: 1.2em;
            font-weight: bold;
            color: #007acc;
            margin-bottom: 5px;
        }
        
        .info-label {
            font-size: 0.9em;
            color: #666;
        }
        
        .preview-container {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .preview-box {
            flex: 1;
            min-width: 300px;
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
        }
        
        .preview-image {
            max-width: 100%;
            max-height: 300px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: #007acc;
            color: white;
        }
        
        .btn-primary:hover {
            background: #0056b3;
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #545b62;
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background: #1e7e34;
        }
        
        .hidden {
            display: none;
        }
        
        .error {
            color: #dc3545;
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        .success {
            color: #155724;
            background: #d4edda;
            border: 1px solid #c3e6cb;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        .guide-section {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 30px 0;
        }
        
        .guide-section h3 {
            color: #007acc;
            margin-bottom: 15px;
        }
        
        .guide-steps {
            counter-reset: step-counter;
        }
        
        .guide-step {
            counter-increment: step-counter;
            margin-bottom: 15px;
            padding-left: 30px;
            position: relative;
        }
        
        .guide-step::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0;
            background: #007acc;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }
        
        .faq-item {
            margin-bottom: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .faq-question {
            background: #f8f9fa;
            padding: 15px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s ease;
        }
        
        .faq-question:hover {
            background: #e9ecef;
        }
        
        .faq-answer {
            padding: 15px;
            display: none;
            border-top: 1px solid #e0e0e0;
        }
        
        .faq-answer.active {
            display: block;
        }
        
        @media (max-width: 768px) {
            .tab-buttons {
                flex-direction: column;
            }
            
            .preview-container {
                flex-direction: column;
            }
            
            .action-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body class="is-preload">
    <div id="page-wrapper">
        <!-- Header -->
        <section id="header">
            <h1><a href="/">云云的工具箱</a></h1>
            <nav id="nav">
                <ul>
                    <li><a href="/">首页</a></li>
                    <li>
                        <a href="#" class="icon solid fa-angle-down">工具集</a>
                        <ul>
                            <li><a href="/tools/image-compressor/">图片压缩</a></li>
                            <li><a href="/tools/text-processor/">文本处理</a></li>
                            <li><a href="/tools/format-converter/">格式转换</a></li>
                            <li class="current"><a href="/tools/image-to-base64/">图片转Base64</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="icon solid fa-angle-down">媒体工具</a>
                        <ul>
                            <li><a href="/tools/audio-processor/">音频处理</a></li>
                            <li><a href="/tools/video-processor/">视频处理</a></li>
                            <li><a href="/tools/pdf-toolkit/">PDF工具</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="icon solid fa-angle-down">更多</a>
                        <ul>
                            <li><a href="/left-sidebar.html">使用说明</a></li>
                            <li><a href="/right-sidebar.html">关于我们</a></li>
                            <li><a href="/no-sidebar.html">联系我们</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </section>

        <!-- Main -->
        <section id="main">
            <div class="container">
                <div class="tool-container">
                    <!-- 工具标题和介绍 -->
                    <header class="major">
                        <h1>图片转Base64工具</h1>
                        <p>免费在线图片Base64编码转换，支持多种格式和输入方式，安全快速无需上传</p>
                    </header>
                    
                    <!-- 工具功能实现 -->
                    <div class="tab-container">
                        <div class="tab-buttons">
                            <div class="tab-button active" data-tab="upload">📁 文件上传</div>
                            <div class="tab-button" data-tab="url">🔗 链接转换</div>
                            <div class="tab-button" data-tab="paste">📋 截图粘贴</div>
                            <div class="tab-button" data-tab="decode">🔄 Base64解码</div>
                        </div>
                        
                        <div class="tab-content">
                            <!-- 文件上传 -->
                            <div class="tab-pane active" id="upload">
                                <div class="upload-area" id="uploadArea">
                                    <div class="upload-icon">📁</div>
                                    <h3>拖拽图片到此处或点击选择文件</h3>
                                    <p>支持 JPG、PNG、GIF、WebP 格式，最大 10MB</p>
                                    <input type="file" id="fileInput" accept="image/*" class="hidden" />
                                </div>
                            </div>
                            
                            <!-- 链接转换 -->
                            <div class="tab-pane" id="url">
                                <div class="input-group">
                                    <label for="imageUrl">图片链接地址：</label>
                                    <input type="url" id="imageUrl" placeholder="请输入图片URL地址，如：https://example.com/image.jpg" />
                                </div>
                                <div class="action-buttons">
                                    <button class="btn btn-primary" onclick="convertFromUrl()">转换为Base64</button>
                                </div>
                            </div>
                            
                            <!-- 截图粘贴 -->
                            <div class="tab-pane" id="paste">
                                <div class="upload-area" id="pasteArea">
                                    <div class="upload-icon">📋</div>
                                    <h3>按 Ctrl+V 粘贴截图或复制的图片</h3>
                                    <p>支持从剪贴板直接粘贴图片</p>
                                </div>
                            </div>
                            
                            <!-- Base64解码 -->
                            <div class="tab-pane" id="decode">
                                <div class="input-group">
                                    <label for="base64Input">Base64编码：</label>
                                    <textarea id="base64Input" placeholder="请粘贴Base64编码数据..."></textarea>
                                </div>
                                <div class="action-buttons">
                                    <button class="btn btn-primary" onclick="decodeBase64()">解码为图片</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 结果显示区域 -->
                    <div class="result-area hidden" id="resultArea">
                        <h3>转换结果</h3>
                        <div class="result-info" id="resultInfo"></div>
                        <div class="preview-container" id="previewContainer"></div>
                        <div class="input-group">
                            <label for="base64Output">Base64编码结果：</label>
                            <textarea id="base64Output" readonly></textarea>
                        </div>
                        <div class="action-buttons">
                            <button class="btn btn-success" onclick="copyToClipboard()">📋 复制Base64</button>
                            <button class="btn btn-secondary" onclick="downloadResult()">💾 下载图片</button>
                            <button class="btn btn-secondary" onclick="clearResult()">🗑️ 清空结果</button>
                        </div>
                    </div>
                    
                    <!-- 使用指南 -->
                    <div class="guide-section">
                        <h3>📖 使用指南</h3>
                        <div class="guide-steps">
                            <div class="guide-step">
                                <strong>选择输入方式：</strong>可以通过文件上传、图片链接、截图粘贴或Base64解码四种方式处理图片
                            </div>
                            <div class="guide-step">
                                <strong>上传或输入图片：</strong>根据选择的方式上传图片文件、输入图片URL或粘贴Base64编码
                            </div>
                            <div class="guide-step">
                                <strong>查看转换结果：</strong>系统会自动显示图片信息和Base64编码结果
                            </div>
                            <div class="guide-step">
                                <strong>复制或下载：</strong>可以复制Base64编码到剪贴板或下载处理后的图片
                            </div>
                        </div>
                    </div>
                    
                    <!-- 工具详细介绍 -->
                    <div class="guide-section">
                        <h3>🔧 工具详细介绍</h3>
                        <p>图片转Base64工具是一款专业的在线图片编码转换工具，支持将各种格式的图片文件转换为Base64编码格式。Base64是一种基于64个可打印字符来表示二进制数据的编码方式，广泛应用于网页开发、数据传输和存储等场景。</p>
                        
                        <h4>🎯 核心功能</h4>
                        <ul>
                            <li><strong>多格式支持：</strong>支持JPG、PNG、GIF、WebP等主流图片格式</li>
                            <li><strong>多种输入方式：</strong>文件上传、URL链接、截图粘贴、Base64解码</li>
                            <li><strong>实时预览：</strong>转换过程中可实时查看原图和结果</li>
                            <li><strong>详细信息：</strong>显示图片尺寸、文件大小、编码长度等详细信息</li>
                            <li><strong>便捷操作：</strong>一键复制Base64编码，支持结果下载</li>
                        </ul>
                        
                        <h4>🌟 应用场景</h4>
                        <ul>
                            <li><strong>网页开发：</strong>将小图标、背景图片嵌入CSS或HTML中，减少HTTP请求</li>
                            <li><strong>数据传输：</strong>在JSON、XML等数据格式中传输图片数据</li>
                            <li><strong>邮件附件：</strong>在HTML邮件中嵌入图片，避免附件被屏蔽</li>
                            <li><strong>移动开发：</strong>在移动应用中嵌入小图片，提高加载速度</li>
                            <li><strong>API接口：</strong>通过API传输图片数据，无需文件上传</li>
                        </ul>
                    </div>
                    
                    <!-- 工具优势 -->
                    <div class="guide-section">
                        <h3>⭐ 为什么选择我们的工具</h3>
                        <div class="result-info">
                            <div class="info-card">
                                <div class="info-value">🔒</div>
                                <div class="info-label"><strong>安全可靠</strong><br>本地处理，不上传服务器</div>
                            </div>
                            <div class="info-card">
                                <div class="info-value">⚡</div>
                                <div class="info-label"><strong>快速高效</strong><br>即时转换，无需等待</div>
                            </div>
                            <div class="info-card">
                                <div class="info-value">🆓</div>
                                <div class="info-label"><strong>完全免费</strong><br>无限制使用，无需注册</div>
                            </div>
                            <div class="info-card">
                                <div class="info-value">📱</div>
                                <div class="info-label"><strong>跨平台兼容</strong><br>支持所有设备和浏览器</div>
                            </div>
                        </div>
                        
                        <p>我们的图片转Base64工具采用最新的Web技术，确保在各种设备和浏览器上都能完美运行。所有处理都在您的浏览器本地完成，保证您的图片数据安全性和隐私性。无论您是开发者、设计师还是普通用户，都能轻松使用我们的工具完成图片编码转换任务。</p>
                    </div>
                    
                    <!-- 常见问题 -->
                    <div class="guide-section">
                        <h3>❓ 常见问题解答</h3>
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">什么是Base64编码？</div>
                            <div class="faq-answer">
                                Base64是一种基于64个可打印字符来表示二进制数据的编码方式。它将二进制数据转换为ASCII字符串格式，常用于在文本协议中传输二进制数据，如在HTML、CSS、JSON中嵌入图片。
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">支持哪些图片格式？</div>
                            <div class="faq-answer">
                                我们的工具支持所有主流图片格式，包括JPG/JPEG、PNG、GIF、WebP、BMP、SVG等。只要是浏览器能够显示的图片格式，都可以进行Base64转换。
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">图片大小有限制吗？</div>
                            <div class="faq-answer">
                                为了确保良好的用户体验，我们建议上传的图片文件不超过10MB。过大的图片会产生很长的Base64编码，可能影响浏览器性能。对于大图片，建议先进行压缩处理。
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">转换后的数据安全吗？</div>
                            <div class="faq-answer">
                                绝对安全！我们的工具完全在您的浏览器本地运行，不会将您的图片上传到任何服务器。所有的转换处理都在您的设备上完成，确保您的数据隐私和安全。
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">如何在网页中使用Base64图片？</div>
                            <div class="faq-answer">
                                在HTML中使用：&lt;img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA..." /&gt;<br>
                                在CSS中使用：background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...);<br>
                                注意要包含正确的MIME类型前缀。
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">Base64编码比原图片大吗？</div>
                            <div class="faq-answer">
                                是的，Base64编码通常比原始二进制数据大约33%。这是因为Base64使用64个字符来表示256种可能的字节值，存在一定的冗余。但在某些场景下，这种大小增加是值得的，比如减少HTTP请求数量。
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <section id="footer">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div id="copyright">
                            <ul class="links">
                                <li>&copy; 2025 图片转Base64工具 - 专业的在线图片编码转换工具</li>
                                <li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Scripts -->
    <script src="../../assets/js/jquery.min.js"></script>
    <script src="../../assets/js/jquery.dropotron.min.js"></script>
    <script src="../../assets/js/browser.min.js"></script>
    <script src="../../assets/js/breakpoints.min.js"></script>
    <script src="../../assets/js/util.js"></script>
    <script src="../../assets/js/main.js"></script>
    
    <script>
        // 全局变量
        let currentFile = null;
        let currentBase64 = null;
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            initializeEventListeners();
        });
        
        // 初始化事件监听器
        function initializeEventListeners() {
            // 标签页切换
            document.querySelectorAll('.tab-button').forEach(button => {
                button.addEventListener('click', function() {
                    switchTab(this.dataset.tab);
                });
            });
            
            // 文件上传
            const fileInput = document.getElementById('fileInput');
            const uploadArea = document.getElementById('uploadArea');
            
            uploadArea.addEventListener('click', () => fileInput.click());
            uploadArea.addEventListener('dragover', handleDragOver);
            uploadArea.addEventListener('dragleave', handleDragLeave);
            uploadArea.addEventListener('drop', handleDrop);
            
            fileInput.addEventListener('change', handleFileSelect);
            
            // 粘贴事件
            document.addEventListener('paste', handlePaste);
            
            // URL输入框回车事件
            document.getElementById('imageUrl').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    convertFromUrl();
                }
            });
        }
        
        // 切换标签页
        function switchTab(tabName) {
            // 更新按钮状态
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            
            // 更新内容显示
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
        }
        
        // 处理拖拽
        function handleDragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('dragover');
        }
        
        function handleDragLeave(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('dragover');
        }
        
        function handleDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('dragover');
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                processFile(files[0]);
            }
        }
        
        // 处理文件选择
        function handleFileSelect(e) {
            const file = e.target.files[0];
            if (file) {
                processFile(file);
            }
        }
        
        // 处理粘贴事件
        function handlePaste(e) {
            const items = e.clipboardData.items;
            for (let item of items) {
                if (item.type.indexOf('image') !== -1) {
                    const file = item.getAsFile();
                    processFile(file);
                    switchTab('paste');
                    break;
                }
            }
        }
        
        // 处理文件
        function processFile(file) {
            if (!file.type.startsWith('image/')) {
                showError('请选择有效的图片文件！');
                return;
            }
            
            if (file.size > 10 * 1024 * 1024) {
                showError('文件大小不能超过10MB！');
                return;
            }
            
            currentFile = file;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                currentBase64 = e.target.result;
                displayResult(file, currentBase64);
            };
            reader.readAsDataURL(file);
        }
        
        // 从URL转换
        function convertFromUrl() {
            const url = document.getElementById('imageUrl').value.trim();
            if (!url) {
                showError('请输入图片URL地址！');
                return;
            }
            
            // 创建图片元素来加载URL
            const img = new Image();
            img.crossOrigin = 'anonymous';
            
            img.onload = function() {
                // 创建canvas来转换图片
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                canvas.width = img.width;
                canvas.height = img.height;
                
                ctx.drawImage(img, 0, 0);
                
                try {
                    const base64 = canvas.toDataURL();
                    currentBase64 = base64;
                    
                    // 创建虚拟文件对象
                    const fileName = url.split('/').pop() || 'image';
                    const fileObj = {
                        name: fileName,
                        size: Math.round(base64.length * 0.75), // 估算文件大小
                        type: base64.split(';')[0].split(':')[1]
                    };
                    
                    displayResult(fileObj, base64);
                } catch (error) {
                    showError('无法转换此图片，可能存在跨域限制！');
                }
            };
            
            img.onerror = function() {
                showError('无法加载图片，请检查URL是否正确！');
            };
            
            img.src = url;
        }
        
        // Base64解码
        function decodeBase64() {
            const base64Input = document.getElementById('base64Input').value.trim();
            if (!base64Input) {
                showError('请输入Base64编码数据！');
                return;
            }
            
            try {
                // 检查是否包含data URL前缀
                let base64Data = base64Input;
                if (!base64Data.startsWith('data:')) {
                    // 尝试检测图片类型
                    const firstChars = base64Data.substring(0, 10);
                    let mimeType = 'image/png'; // 默认
                    
                    if (firstChars.startsWith('/9j/')) mimeType = 'image/jpeg';
                    else if (firstChars.startsWith('iVBORw0KGgo')) mimeType = 'image/png';
                    else if (firstChars.startsWith('R0lGODlh')) mimeType = 'image/gif';
                    
                    base64Data = `data:${mimeType};base64,${base64Data}`;
                }
                
                currentBase64 = base64Data;
                
                // 创建虚拟文件对象
                const fileObj = {
                    name: 'decoded_image',
                    size: Math.round(base64Data.length * 0.75),
                    type: base64Data.split(';')[0].split(':')[1]
                };
                
                displayResult(fileObj, base64Data);
            } catch (error) {
                showError('无效的Base64编码数据！');
            }
        }
        
        // 显示结果
        function displayResult(file, base64) {
            const resultArea = document.getElementById('resultArea');
            const resultInfo = document.getElementById('resultInfo');
            const previewContainer = document.getElementById('previewContainer');
            const base64Output = document.getElementById('base64Output');
            
            // 显示结果区域
            resultArea.classList.remove('hidden');
            
            // 显示文件信息
            const fileSize = formatFileSize(file.size);
            const base64Size = formatFileSize(base64.length);
            const dimensions = getDimensions(base64);
            
            resultInfo.innerHTML = `
                <div class="info-card">
                    <div class="info-value">${file.name}</div>
                    <div class="info-label">文件名</div>
                </div>
                <div class="info-card">
                    <div class="info-value">${file.type}</div>
                    <div class="info-label">文件类型</div>
                </div>
                <div class="info-card">
                    <div class="info-value">${fileSize}</div>
                    <div class="info-label">原始大小</div>
                </div>
                <div class="info-card">
                    <div class="info-value">${base64Size}</div>
                    <div class="info-label">Base64大小</div>
                </div>
            `;
            
            // 显示预览
            previewContainer.innerHTML = `
                <div class="preview-box">
                    <h4>原图预览</h4>
                    <img src="${base64}" alt="预览图片" class="preview-image" />
                </div>
            `;
            
            // 显示Base64编码
            base64Output.value = base64;
            
            // 滚动到结果区域
            resultArea.scrollIntoView({ behavior: 'smooth' });
        }
        
        // 获取图片尺寸
        function getDimensions(base64) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = function() {
                    resolve({ width: img.width, height: img.height });
                };
                img.src = base64;
            });
        }
        
        // 格式化文件大小
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        // 复制到剪贴板
        function copyToClipboard() {
            const base64Output = document.getElementById('base64Output');
            base64Output.select();
            document.execCommand('copy');
            showSuccess('Base64编码已复制到剪贴板！');
        }
        
        // 下载结果
        function downloadResult() {
            if (!currentBase64) return;
            
            const link = document.createElement('a');
            link.href = currentBase64;
            link.download = currentFile ? currentFile.name : 'converted_image.png';
            link.click();
        }
        
        // 清空结果
        function clearResult() {
            document.getElementById('resultArea').classList.add('hidden');
            document.getElementById('base64Output').value = '';
            document.getElementById('imageUrl').value = '';
            document.getElementById('base64Input').value = '';
            document.getElementById('fileInput').value = '';
            currentFile = null;
            currentBase64 = null;
        }
        
        // 显示错误信息
        function showError(message) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error';
            errorDiv.textContent = message;
            
            const container = document.querySelector('.tool-container');
            container.insertBefore(errorDiv, container.firstChild);
            
            setTimeout(() => {
                errorDiv.remove();
            }, 5000);
        }
        
        // 显示成功信息
        function showSuccess(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'success';
            successDiv.textContent = message;
            
            const container = document.querySelector('.tool-container');
            container.insertBefore(successDiv, container.firstChild);
            
            setTimeout(() => {
                successDiv.remove();
            }, 3000);
        }
        
        // 切换FAQ
        function toggleFaq(element) {
            const answer = element.nextElementSibling;
            answer.classList.toggle('active');
        }
    </script>
</body>
</html>
