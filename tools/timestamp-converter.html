<!DOCTYPE html>
<!--
	Dopetrope by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
<head>
    <title>时间戳转换工具 - 云云的工具箱</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta name="description" content="免费在线时间戳转换工具，支持秒/毫秒时间戳与本地化时间的相互转换，世界时区切换，实时时钟展示" />
    <meta name="keywords" content="时间戳转换,Unix时间戳,时区转换,世界时钟,时间格式转换,在线工具" />
    <link rel="stylesheet" href="../assets/css/main.css" />
    <style>
        .tool-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .converter-panel {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .panel-header {
            background: #f8f9fa;
            padding: 15px 20px;
            border-bottom: 1px solid #ddd;
            text-align: center;
        }
        
        .panel-header h3 {
            margin: 0;
            color: #007acc;
        }
        
        .panel-content {
            padding: 20px;
        }
        
        .current-time-display {
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .current-timestamp {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
            font-family: 'Courier New', monospace;
        }
        
        .current-datetime {
            font-size: 1.2em;
            margin-bottom: 15px;
        }
        
        .timestamp-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .btn-primary:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .conversion-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }
        
        .conversion-section {
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
        }
        
        .section-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #007acc;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        
        .input-group input, .input-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            box-sizing: border-box;
        }
        
        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #007acc;
            box-shadow: 0 0 0 2px rgba(0, 122, 204, 0.2);
        }
        
        .convert-btn {
            width: 100%;
            padding: 12px;
            background: #007acc;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 10px 0;
        }
        
        .convert-btn:hover {
            background: #0056b3;
            transform: translateY(-1px);
        }
        
        .result-display {
            background: #e6f3ff;
            border: 1px solid #b3d9ff;
            border-radius: 4px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            min-height: 100px;
        }
        
        .world-clocks {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 30px 0;
        }
        
        .clocks-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .clock-item {
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .clock-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .clock-city {
            font-size: 1.1em;
            font-weight: bold;
            color: #007acc;
            margin-bottom: 10px;
        }
        
        .clock-time {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
            font-family: 'Courier New', monospace;
        }
        
        .clock-date {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }
        
        .clock-timezone {
            font-size: 0.8em;
            color: #999;
        }
        
        .timezone-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .timezone-selector label {
            font-weight: bold;
            color: #333;
        }
        
        .timezone-selector select {
            flex: 1;
            min-width: 200px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .format-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .format-option {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .format-option input[type="radio"] {
            width: auto;
        }
        
        .quick-actions {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #545b62;
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background: #1e7e34;
        }
        
        .guide-section {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 30px 0;
        }
        
        .guide-section h3 {
            color: #007acc;
            margin-bottom: 15px;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .info-card {
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            padding: 15px;
            text-align: center;
        }
        
        .info-value {
            font-size: 1.2em;
            font-weight: bold;
            color: #007acc;
            margin-bottom: 5px;
        }
        
        .info-label {
            font-size: 0.9em;
            color: #666;
        }
        
        .faq-item {
            margin-bottom: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .faq-question {
            background: #f8f9fa;
            padding: 15px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s ease;
        }
        
        .faq-question:hover {
            background: #e9ecef;
        }
        
        .faq-answer {
            padding: 15px;
            display: none;
            border-top: 1px solid #e0e0e0;
        }
        
        .faq-answer.active {
            display: block;
        }
        
        .error {
            color: #dc3545;
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        .success {
            color: #155724;
            background: #d4edda;
            border: 1px solid #c3e6cb;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        @media (max-width: 768px) {
            .conversion-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .current-timestamp {
                font-size: 1.8em;
            }
            
            .clocks-grid {
                grid-template-columns: 1fr;
            }
            
            .timezone-selector {
                flex-direction: column;
                align-items: stretch;
            }
            
            .quick-actions {
                justify-content: center;
            }
        }
    </style>
</head>
<body class="is-preload">
    <div id="page-wrapper">
        <!-- Header -->
        <section id="header">
            <h1><a href="../index.html">云云的工具箱</a></h1>
            <nav id="nav">
                <ul>
                    <li><a href="../index.html">首页</a></li>
                    <li>
                        <a href="#">工具分类</a>
                        <ul>
                            <li><a href="图片压缩工具.html">图片压缩</a></li>
                            <li><a href="文本处理工具.html">文本处理</a></li>
                            <li><a href="格式转换工具.html">格式转换</a></li>
                            <li>
                                <a href="#">更多工具</a>
                                <ul>
                                    <li><a href="音频处理工具.html">音频处理</a></li>
                                    <li><a href="视频处理工具.html">视频处理</a></li>
                                    <li><a href="pdf工具集.html">PDF工具</a></li>
                                    <li><a href="图片转Base64工具.html">图片转Base64</a></li>
                                    <li><a href="信息编码转换工具.html">信息编码转换</a></li>
                                    <li class="current"><a href="时间戳转换工具.html">时间戳转换</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li><a href="../left-sidebar.html">使用说明</a></li>
                    <li><a href="../right-sidebar.html">关于我们</a></li>
                     <li><a href="../no-sidebar.html">联系我们</a></li>
                </ul>
            </nav>
        </section>

        <!-- Main -->
        <section id="main">
            <div class="container">
                <div class="tool-container">
                    <!-- 工具标题和介绍 -->
                    <header class="major">
                        <h1>时间戳转换工具</h1>
                        <p>本地化时间与时间戳之间的相互转换，支持秒/毫秒、世界时区切换、实时时钟展示</p>
                    </header>
                    
                    <!-- 当前时间显示 -->
                    <div class="current-time-display">
                        <div class="current-timestamp" id="currentTimestamp">1640995200</div>
                        <div class="current-datetime" id="currentDatetime">2022-01-01 00:00:00</div>
                        <div class="timestamp-controls">
                            <button class="btn btn-primary" onclick="copyCurrentTimestamp()">📋 复制时间戳</button>
                            <button class="btn btn-primary" onclick="copyCurrentDatetime()">📋 复制时间</button>
                            <button class="btn btn-primary" onclick="refreshTime()">🔄 刷新</button>
                        </div>
                    </div>
                    
                    <!-- 转换面板 -->
                    <div class="conversion-grid">
                        <!-- 时间戳转时间 -->
                        <div class="conversion-section">
                            <div class="section-title">🕐 时间戳转时间</div>
                            
                            <div class="input-group">
                                <label for="timestampInput">时间戳：</label>
                                <input type="text" id="timestampInput" placeholder="输入时间戳（秒或毫秒）" />
                            </div>
                            
                            <div class="format-options">
                                <div class="format-option">
                                    <input type="radio" id="timestampSeconds" name="timestampUnit" value="seconds" checked />
                                    <label for="timestampSeconds">秒（10位）</label>
                                </div>
                                <div class="format-option">
                                    <input type="radio" id="timestampMilliseconds" name="timestampUnit" value="milliseconds" />
                                    <label for="timestampMilliseconds">毫秒（13位）</label>
                                </div>
                            </div>
                            
                            <div class="timezone-selector">
                                <label for="timestampTimezone">时区：</label>
                                <select id="timestampTimezone">
                                    <option value="Asia/Shanghai">北京时间 (UTC+8)</option>
                                    <option value="UTC">协调世界时 (UTC+0)</option>
                                    <option value="America/New_York">纽约时间 (UTC-5/-4)</option>
                                    <option value="Europe/London">伦敦时间 (UTC+0/+1)</option>
                                    <option value="Asia/Tokyo">东京时间 (UTC+9)</option>
                                    <option value="Australia/Sydney">悉尼时间 (UTC+10/+11)</option>
                                    <option value="America/Los_Angeles">洛杉矶时间 (UTC-8/-7)</option>
                                    <option value="Europe/Paris">巴黎时间 (UTC+1/+2)</option>
                                </select>
                            </div>
                            
                            <button class="convert-btn" onclick="convertTimestampToDate()">🔄 转换为时间</button>
                            
                            <div class="quick-actions">
                                <button class="btn btn-secondary" onclick="useCurrentTimestamp()">📅 当前时间戳</button>
                                <button class="btn btn-secondary" onclick="clearTimestampInput()">🗑️ 清空</button>
                            </div>
                            
                            <div class="result-display" id="timestampResult">转换结果将显示在这里...</div>
                        </div>
                        
                        <!-- 时间转时间戳 -->
                        <div class="conversion-section">
                            <div class="section-title">📅 时间转时间戳</div>
                            
                            <div class="input-group">
                                <label for="datetimeInput">日期时间：</label>
                                <input type="datetime-local" id="datetimeInput" />
                            </div>
                            
                            <div class="timezone-selector">
                                <label for="datetimeTimezone">时区：</label>
                                <select id="datetimeTimezone">
                                    <option value="Asia/Shanghai">北京时间 (UTC+8)</option>
                                    <option value="UTC">协调世界时 (UTC+0)</option>
                                    <option value="America/New_York">纽约时间 (UTC-5/-4)</option>
                                    <option value="Europe/London">伦敦时间 (UTC+0/+1)</option>
                                    <option value="Asia/Tokyo">东京时间 (UTC+9)</option>
                                    <option value="Australia/Sydney">悉尼时间 (UTC+10/+11)</option>
                                    <option value="America/Los_Angeles">洛杉矶时间 (UTC-8/-7)</option>
                                    <option value="Europe/Paris">巴黎时间 (UTC+1/+2)</option>
                                </select>
                            </div>
                            
                            <div class="format-options">
                                <div class="format-option">
                                    <input type="radio" id="outputSeconds" name="outputUnit" value="seconds" checked />
                                    <label for="outputSeconds">秒时间戳</label>
                                </div>
                                <div class="format-option">
                                    <input type="radio" id="outputMilliseconds" name="outputUnit" value="milliseconds" />
                                    <label for="outputMilliseconds">毫秒时间戳</label>
                                </div>
                            </div>
                            
                            <button class="convert-btn" onclick="convertDateToTimestamp()">🔄 转换为时间戳</button>
                            
                            <div class="quick-actions">
                                <button class="btn btn-secondary" onclick="useCurrentDatetime()">📅 当前时间</button>
                                <button class="btn btn-secondary" onclick="clearDatetimeInput()">🗑️ 清空</button>
                            </div>
                            
                            <div class="result-display" id="datetimeResult">转换结果将显示在这里...</div>
                        </div>
                    </div>
                    
                    <!-- 世界时钟 -->
                    <div class="world-clocks">
                        <h3>🌍 世界时钟</h3>
                        <div class="clocks-grid" id="worldClocks"></div>
                    </div>
                    
                    <!-- 使用指南 -->
                    <div class="guide-section">
                        <h3>📖 使用指南</h3>
                        <ol>
                            <li><strong>时间戳转时间：</strong>输入10位秒时间戳或13位毫秒时间戳，选择目标时区，点击转换</li>
                            <li><strong>时间转时间戳：</strong>选择日期和时间，选择时区，选择输出格式（秒/毫秒），点击转换</li>
                            <li><strong>快速操作：</strong>使用"当前时间"按钮快速填入当前时间，使用"复制"按钮复制结果</li>
                            <li><strong>世界时钟：</strong>查看全球主要城市的实时时间，自动更新</li>
                            <li><strong>时区支持：</strong>支持全球主要时区，自动处理夏令时</li>
                        </ol>
                    </div>
                    
                    <!-- 工具详细介绍 -->
                    <div class="guide-section">
                        <h3>🔧 工具详细介绍</h3>
                        <p>时间戳转换工具是一款专业的时间格式转换工具，支持Unix时间戳与人类可读时间格式之间的相互转换。无论您是开发者、系统管理员还是数据分析师，都能通过这个工具轻松处理各种时间格式转换需求。</p>
                        
                        <h4>🎯 核心功能</h4>
                        <ul>
                            <li><strong>双向转换：</strong>支持时间戳转时间和时间转时间戳的双向转换</li>
                            <li><strong>多种精度：</strong>支持秒级（10位）和毫秒级（13位）时间戳</li>
                            <li><strong>全球时区：</strong>支持全球主要时区，自动处理夏令时变化</li>
                            <li><strong>实时时钟：</strong>显示当前时间戳和格式化时间，实时更新</li>
                            <li><strong>世界时钟：</strong>同时显示多个时区的当前时间</li>
                            <li><strong>快速操作：</strong>一键复制、快速填入当前时间等便捷功能</li>
                        </ul>
                        
                        <h4>🌟 应用场景</h4>
                        <ul>
                            <li><strong>软件开发：</strong>处理数据库时间字段、API接口时间参数</li>
                            <li><strong>日志分析：</strong>转换系统日志中的时间戳为可读格式</li>
                            <li><strong>数据处理：</strong>处理包含时间戳的数据文件和报表</li>
                            <li><strong>系统运维：</strong>监控系统事件时间、定时任务调试</li>
                            <li><strong>国际协作：</strong>跨时区团队协作时的时间同步</li>
                        </ul>
                    </div>
                    
                    <!-- 工具优势 -->
                    <div class="guide-section">
                        <h3>⭐ 为什么选择我们的工具</h3>
                        <div class="info-grid">
                            <div class="info-card">
                                <div class="info-value">🔒</div>
                                <div class="info-label"><strong>本地处理</strong><br>所有转换在本地完成，保护隐私</div>
                            </div>
                            <div class="info-card">
                                <div class="info-value">⚡</div>
                                <div class="info-label"><strong>实时转换</strong><br>即时转换，无需等待</div>
                            </div>
                            <div class="info-card">
                                <div class="info-value">🌍</div>
                                <div class="info-label"><strong>全球时区</strong><br>支持世界各地时区转换</div>
                            </div>
                            <div class="info-card">
                                <div class="info-value">📱</div>
                                <div class="info-label"><strong>响应式设计</strong><br>完美适配各种设备</div>
                            </div>
                            <div class="info-card">
                                <div class="info-value">🆓</div>
                                <div class="info-label"><strong>完全免费</strong><br>无限制使用，无需注册</div>
                            </div>
                            <div class="info-card">
                                <div class="info-value">🎯</div>
                                <div class="info-label"><strong>精确转换</strong><br>毫秒级精度，准确可靠</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 常见问题 -->
                    <div class="guide-section">
                        <h3>❓ 常见问题解答</h3>
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">什么是Unix时间戳？</div>
                            <div class="faq-answer">
                                Unix时间戳是从1970年1月1日00:00:00 UTC开始到现在的秒数。它是一种标准的时间表示方法，广泛用于计算机系统中存储和传输时间信息。
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">10位和13位时间戳有什么区别？</div>
                            <div class="faq-answer">
                                10位时间戳表示秒级精度，从1970年开始的秒数。13位时间戳表示毫秒级精度，从1970年开始的毫秒数。JavaScript中常用13位毫秒时间戳，而Unix系统通常使用10位秒时间戳。
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">如何处理夏令时？</div>
                            <div class="faq-answer">
                                我们的工具自动处理夏令时变化。当您选择支持夏令时的时区（如纽约、伦敦等）时，工具会根据具体日期自动应用正确的时区偏移量，无需手动调整。
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">为什么时间戳转换结果不准确？</div>
                            <div class="faq-answer">
                                请检查以下几点：1）确认时间戳的位数（10位秒或13位毫秒）；2）确认选择了正确的时区；3）确认时间戳格式正确，不包含小数点或其他字符；4）确认时间戳在有效范围内。
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">支持哪些时间格式？</div>
                            <div class="faq-answer">
                                工具支持标准的ISO 8601格式（YYYY-MM-DD HH:mm:ss），以及各种常见的时间戳格式。输入时间时，建议使用浏览器提供的日期时间选择器，确保格式正确。
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">世界时钟多久更新一次？</div>
                            <div class="faq-answer">
                                世界时钟每秒自动更新一次，确保显示的时间始终准确。如果页面长时间未活动，时钟会在页面重新获得焦点时立即同步到当前时间。
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <section id="footer">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div id="copyright">
                            <ul class="links">
                                <li>&copy; 2025 时间戳转换工具 - 精确的时间格式转换平台</li>
                                <li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.dropotron.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>
    
    <script>
        // 全局变量
        let currentTimeInterval;
        let worldClocksInterval;
        
        // 世界时钟配置
        const worldTimezones = [
            { city: '北京', timezone: 'Asia/Shanghai', flag: '🇨🇳' },
            { city: '纽约', timezone: 'America/New_York', flag: '🇺🇸' },
            { city: '伦敦', timezone: 'Europe/London', flag: '🇬🇧' },
            { city: '东京', timezone: 'Asia/Tokyo', flag: '🇯🇵' },
            { city: '悉尼', timezone: 'Australia/Sydney', flag: '🇦🇺' },
            { city: '洛杉矶', timezone: 'America/Los_Angeles', flag: '🇺🇸' },
            { city: '巴黎', timezone: 'Europe/Paris', flag: '🇫🇷' },
            { city: '迪拜', timezone: 'Asia/Dubai', flag: '🇦🇪' }
        ];
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            initializeCurrentTime();
            initializeWorldClocks();
            setCurrentDatetimeInput();
            
            // 启动定时器
            startCurrentTimeUpdate();
            startWorldClocksUpdate();
        });
        
        // 初始化当前时间显示
        function initializeCurrentTime() {
            updateCurrentTime();
        }
        
        // 更新当前时间显示
        function updateCurrentTime() {
            const now = new Date();
            const timestamp = Math.floor(now.getTime() / 1000);
            const datetime = formatDateTime(now);
            
            document.getElementById('currentTimestamp').textContent = timestamp;
            document.getElementById('currentDatetime').textContent = datetime;
        }
        
        // 启动当前时间更新定时器
        function startCurrentTimeUpdate() {
            if (currentTimeInterval) {
                clearInterval(currentTimeInterval);
            }
            currentTimeInterval = setInterval(updateCurrentTime, 1000);
        }
        
        // 初始化世界时钟
        function initializeWorldClocks() {
            const container = document.getElementById('worldClocks');
            container.innerHTML = '';
            
            worldTimezones.forEach(tz => {
                const clockDiv = document.createElement('div');
                clockDiv.className = 'clock-item';
                clockDiv.id = `clock-${tz.timezone.replace('/', '-')}`;
                
                clockDiv.innerHTML = `
                    <div class="clock-city">${tz.flag} ${tz.city}</div>
                    <div class="clock-time">--:--:--</div>
                    <div class="clock-date">----/--/--</div>
                    <div class="clock-timezone">${tz.timezone}</div>
                `;
                
                container.appendChild(clockDiv);
            });
            
            updateWorldClocks();
        }
        
        // 更新世界时钟
        function updateWorldClocks() {
            const now = new Date();
            
            worldTimezones.forEach(tz => {
                try {
                    const timeInTimezone = new Intl.DateTimeFormat('zh-CN', {
                        timeZone: tz.timezone,
                        hour: '2-digit',
                        minute: '2-digit',
                        second: '2-digit',
                        hour12: false
                    }).format(now);
                    
                    const dateInTimezone = new Intl.DateTimeFormat('zh-CN', {
                        timeZone: tz.timezone,
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit'
                    }).format(now);
                    
                    const clockElement = document.getElementById(`clock-${tz.timezone.replace('/', '-')}`);
                    if (clockElement) {
                        clockElement.querySelector('.clock-time').textContent = timeInTimezone;
                        clockElement.querySelector('.clock-date').textContent = dateInTimezone;
                    }
                } catch (error) {
                    console.error(`Error updating clock for ${tz.timezone}:`, error);
                }
            });
        }
        
        // 启动世界时钟更新定时器
        function startWorldClocksUpdate() {
            if (worldClocksInterval) {
                clearInterval(worldClocksInterval);
            }
            worldClocksInterval = setInterval(updateWorldClocks, 1000);
        }
        
        // 设置当前时间到datetime-local输入框
        function setCurrentDatetimeInput() {
            const now = new Date();
            const localISOTime = new Date(now.getTime() - now.getTimezoneOffset() * 60000).toISOString().slice(0, 16);
            document.getElementById('datetimeInput').value = localISOTime;
        }
        
        // 时间戳转时间
        function convertTimestampToDate() {
            const timestampInput = document.getElementById('timestampInput').value.trim();
            const unit = document.querySelector('input[name="timestampUnit"]:checked').value;
            const timezone = document.getElementById('timestampTimezone').value;
            
            if (!timestampInput) {
                showError('请输入时间戳！');
                return;
            }
            
            if (!/^\d+$/.test(timestampInput)) {
                showError('时间戳只能包含数字！');
                return;
            }
            
            try {
                let timestamp = parseInt(timestampInput);
                
                // 根据单位转换为毫秒
                if (unit === 'seconds') {
                    if (timestampInput.length !== 10) {
                        showError('秒时间戳应该是10位数字！');
                        return;
                    }
                    timestamp *= 1000;
                } else {
                    if (timestampInput.length !== 13) {
                        showError('毫秒时间戳应该是13位数字！');
                        return;
                    }
                }
                
                const date = new Date(timestamp);
                
                if (isNaN(date.getTime())) {
                    showError('无效的时间戳！');
                    return;
                }
                
                // 格式化结果
                const result = formatTimestampResult(date, timezone);
                document.getElementById('timestampResult').innerHTML = result;
                
            } catch (error) {
                showError('转换失败：' + error.message);
            }
        }
        
        // 时间转时间戳
        function convertDateToTimestamp() {
            const datetimeInput = document.getElementById('datetimeInput').value;
            const timezone = document.getElementById('datetimeTimezone').value;
            const outputUnit = document.querySelector('input[name="outputUnit"]:checked').value;
            
            if (!datetimeInput) {
                showError('请选择日期和时间！');
                return;
            }
            
            try {
                // 创建日期对象
                const inputDate = new Date(datetimeInput);
                
                if (isNaN(inputDate.getTime())) {
                    showError('无效的日期时间！');
                    return;
                }
                
                // 获取时间戳（毫秒）
                let timestamp = inputDate.getTime();
                
                // 根据输出单位调整
                if (outputUnit === 'seconds') {
                    timestamp = Math.floor(timestamp / 1000);
                }
                
                // 格式化结果
                const result = formatDatetimeResult(inputDate, timestamp, outputUnit, timezone);
                document.getElementById('datetimeResult').innerHTML = result;
                
            } catch (error) {
                showError('转换失败：' + error.message);
            }
        }
        
        // 格式化时间戳转换结果
        function formatTimestampResult(date, timezone) {
            const utcTime = date.toISOString().replace('T', ' ').slice(0, 19);
            
            let localTime;
            try {
                localTime = new Intl.DateTimeFormat('zh-CN', {
                    timeZone: timezone,
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    hour12: false
                }).format(date).replace(/\//g, '-');
            } catch (error) {
                localTime = utcTime;
            }
            
            const weekday = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'][date.getDay()];
            
            return `
                <strong>转换结果：</strong><br>
                📅 本地时间：${localTime}<br>
                🌍 UTC时间：${utcTime}<br>
                📆 星期：${weekday}<br>
                🕐 时间戳（秒）：${Math.floor(date.getTime() / 1000)}<br>
                🕐 时间戳（毫秒）：${date.getTime()}<br>
                🌐 时区：${timezone}
            `;
        }
        
        // 格式化时间转时间戳结果
        function formatDatetimeResult(date, timestamp, unit, timezone) {
            const utcTime = date.toISOString().replace('T', ' ').slice(0, 19);
            const localTime = date.toLocaleString('zh-CN', { hour12: false }).replace(/\//g, '-');
            const weekday = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'][date.getDay()];
            
            return `
                <strong>转换结果：</strong><br>
                🕐 时间戳：${timestamp}<br>
                📊 单位：${unit === 'seconds' ? '秒（10位）' : '毫秒（13位）'}<br>
                📅 输入时间：${localTime}<br>
                🌍 UTC时间：${utcTime}<br>
                📆 星期：${weekday}<br>
                🌐 时区：${timezone}
            `;
        }
        
        // 格式化日期时间
        function formatDateTime(date) {
            return date.toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            }).replace(/\//g, '-');
        }
        
        // 复制当前时间戳
        async function copyCurrentTimestamp() {
            const timestamp = document.getElementById('currentTimestamp').textContent;
            await copyToClipboard(timestamp, '时间戳已复制到剪贴板！');
        }
        
        // 复制当前时间
        async function copyCurrentDatetime() {
            const datetime = document.getElementById('currentDatetime').textContent;
            await copyToClipboard(datetime, '时间已复制到剪贴板！');
        }
        
        // 刷新时间
        function refreshTime() {
            updateCurrentTime();
            updateWorldClocks();
            showSuccess('时间已刷新！');
        }
        
        // 使用当前时间戳
        function useCurrentTimestamp() {
            const timestamp = Math.floor(Date.now() / 1000);
            document.getElementById('timestampInput').value = timestamp;
            convertTimestampToDate();
        }
        
        // 使用当前时间
        function useCurrentDatetime() {
            setCurrentDatetimeInput();
            convertDateToTimestamp();
        }
        
        // 清空时间戳输入
        function clearTimestampInput() {
            document.getElementById('timestampInput').value = '';
            document.getElementById('timestampResult').innerHTML = '转换结果将显示在这里...';
        }
        
        // 清空时间输入
        function clearDatetimeInput() {
            document.getElementById('datetimeInput').value = '';
            document.getElementById('datetimeResult').innerHTML = '转换结果将显示在这里...';
        }
        
        // 复制到剪贴板
        async function copyToClipboard(text, successMessage) {
            try {
                await navigator.clipboard.writeText(text);
                showSuccess(successMessage);
            } catch (error) {
                // 降级方案
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showSuccess(successMessage);
            }
        }
        
        // 显示错误信息
        function showError(message) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error';
            errorDiv.textContent = message;
            
            const container = document.querySelector('.tool-container');
            container.insertBefore(errorDiv, container.firstChild);
            
            setTimeout(() => {
                errorDiv.remove();
            }, 5000);
        }
        
        // 显示成功信息
        function showSuccess(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'success';
            successDiv.textContent = message;
            
            const container = document.querySelector('.tool-container');
            container.insertBefore(successDiv, container.firstChild);
            
            setTimeout(() => {
                successDiv.remove();
            }, 3000);
        }
        
        // 切换FAQ
        function toggleFaq(element) {
            const answer = element.nextElementSibling;
            answer.classList.toggle('active');
        }
        
        // 页面失去焦点时暂停定时器，获得焦点时恢复
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                if (currentTimeInterval) clearInterval(currentTimeInterval);
                if (worldClocksInterval) clearInterval(worldClocksInterval);
            } else {
                startCurrentTimeUpdate();
                startWorldClocksUpdate();
            }
        });
        
        // 页面卸载时清理定时器
        window.addEventListener('beforeunload', function() {
            if (currentTimeInterval) clearInterval(currentTimeInterval);
            if (worldClocksInterval) clearInterval(worldClocksInterval);
        });
    </script>
</body>
</html>
