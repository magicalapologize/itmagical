<!DOCTYPE HTML>
<html>
<head>
	<title>图片加边框工具 - 一键批量对图片添加内外边框或图片留白处理 | ITMagical</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<meta name="description" content="免费在线图片加边框工具，支持批量添加内外边框，图片留白处理，多种边框样式，自定义颜色和宽度，无需下载安装，即开即用。" />
	<meta name="keywords" content="图片加边框,图片边框,图片留白,边框工具,在线边框处理,批量加边框,免费边框工具" />
	<meta name="author" content="ITMagical" />
	<meta property="og:title" content="图片加边框工具 - 一键批量对图片添加内外边框或图片留白处理" />
	<meta property="og:description" content="免费在线图片加边框工具，支持批量添加内外边框，图片留白处理，多种边框样式。" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://tool.itmagical.top/tools/图片加边框工具.html" />
	<meta property="og:image" content="https://tool.itmagical.top/images/pic22.jpg" />
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:title" content="图片加边框工具 - 一键批量对图片添加内外边框或图片留白处理" />
	<meta name="twitter:description" content="免费在线图片加边框工具，支持批量添加内外边框，图片留白处理，多种边框样式。" />
	<meta name="twitter:image" content="https://tool.itmagical.top/images/pic22.jpg" />
	<link rel="canonical" href="https://tool.itmagical.top/tools/图片加边框工具.html" />
	<link rel="stylesheet" href="../../assets/css/main.css" />
	<noscript><link rel="stylesheet" href="../../assets/css/noscript.css" /></noscript>
	<style>
		.tool-container {
			max-width: 1200px;
			margin: 0 auto;
			padding: 2rem;
			background: #fff;
			border-radius: 10px;
			box-shadow: 0 4px 20px rgba(0,0,0,0.1);
		}
		.upload-area {
			border: 2px dashed #007acc;
			border-radius: 10px;
			padding: 3rem;
			text-align: center;
			background: #f8f9fa;
			transition: all 0.3s ease;
			cursor: pointer;
			margin-bottom: 2rem;
		}
		.upload-area:hover {
			border-color: #0056b3;
			background: #e3f2fd;
		}
		.upload-area.dragover {
			border-color: #28a745;
			background: #d4edda;
		}
		.upload-icon {
			font-size: 3rem;
			color: #007acc;
			margin-bottom: 1rem;
		}
		.settings-panel {
			background: #f8f9fa;
			padding: 1.5rem;
			border-radius: 8px;
			margin-bottom: 2rem;
		}
		.setting-group {
			margin-bottom: 1rem;
		}
		.setting-group label {
			display: block;
			margin-bottom: 0.5rem;
			font-weight: bold;
			color: #333;
		}
		.setting-group input, .setting-group select {
			width: 100%;
			padding: 0.5rem;
			border: 1px solid #ddd;
			border-radius: 4px;
			font-size: 1rem;
		}
		.setting-row {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 1rem;
		}
		.color-input-group {
			display: flex;
			gap: 0.5rem;
			align-items: center;
		}
		.color-input-group input[type="color"] {
			width: 50px;
			height: 40px;
			border: none;
			border-radius: 4px;
			cursor: pointer;
		}
		.color-input-group input[type="text"] {
			flex: 1;
		}
		.border-style-preview {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
			gap: 1rem;
			margin-top: 0.5rem;
		}
		.border-style-option {
			border: 2px solid #ddd;
			border-radius: 8px;
			padding: 1rem;
			text-align: center;
			cursor: pointer;
			transition: all 0.3s ease;
			background: white;
		}
		.border-style-option:hover {
			border-color: #007acc;
		}
		.border-style-option.selected {
			border-color: #007acc;
			background: #e3f2fd;
		}
		.border-style-option .preview-box {
			width: 40px;
			height: 40px;
			margin: 0 auto 0.5rem;
			background: #f0f0f0;
		}
		.preview-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
			gap: 1rem;
			margin-bottom: 2rem;
		}
		.preview-item {
			position: relative;
			background: #fff;
			border: 1px solid #ddd;
			border-radius: 8px;
			padding: 1rem;
			text-align: center;
		}
		.preview-comparison {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 0.5rem;
			margin-bottom: 1rem;
		}
		.preview-comparison img {
			width: 100%;
			height: auto;
			border-radius: 4px;
		}
		.preview-label {
			font-size: 0.9rem;
			color: #666;
			margin-bottom: 0.5rem;
			font-weight: bold;
		}
		.preview-item .filename {
			font-size: 0.9rem;
			color: #666;
			margin-bottom: 0.5rem;
			word-break: break-all;
		}
		.remove-btn {
			position: absolute;
			top: 5px;
			right: 5px;
			background: #dc3545;
			color: white;
			border: none;
			border-radius: 50%;
			width: 25px;
			height: 25px;
			cursor: pointer;
			font-size: 0.8rem;
		}
		.action-buttons {
			display: flex;
			gap: 1rem;
			justify-content: center;
			margin-bottom: 2rem;
		}
		.btn {
			padding: 0.75rem 2rem;
			border: none;
			border-radius: 5px;
			font-size: 1rem;
			cursor: pointer;
			transition: all 0.3s ease;
			text-decoration: none;
			display: inline-block;
			text-align: center;
		}
		.btn-primary {
			background: #007acc;
			color: white;
		}
		.btn-primary:hover {
			background: #0056b3;
		}
		.btn-success {
			background: #28a745;
			color: white;
		}
		.btn-success:hover {
			background: #1e7e34;
		}
		.btn-secondary {
			background: #6c757d;
			color: white;
		}
		.btn-secondary:hover {
			background: #545b62;
		}
		.progress-bar {
			width: 100%;
			height: 20px;
			background: #e9ecef;
			border-radius: 10px;
			overflow: hidden;
			margin-bottom: 1rem;
			display: none;
		}
		.progress-fill {
			height: 100%;
			background: linear-gradient(90deg, #007acc, #28a745);
			width: 0%;
			transition: width 0.3s ease;
		}
		.guide-section, .intro-section, .promo-section, .advantages-section, .faq-section {
			margin: 3rem 0;
			padding: 2rem;
			background: #f8f9fa;
			border-radius: 10px;
		}
		.guide-section h2, .intro-section h2, .promo-section h2, .advantages-section h2, .faq-section h2 {
			color: #007acc;
			margin-bottom: 1.5rem;
			border-bottom: 2px solid #007acc;
			padding-bottom: 0.5rem;
		}
		.guide-steps {
			counter-reset: step-counter;
		}
		.guide-step {
			counter-increment: step-counter;
			margin-bottom: 1.5rem;
			padding: 1rem;
			background: white;
			border-radius: 8px;
			border-left: 4px solid #007acc;
		}
		.guide-step::before {
			content: "步骤 " counter(step-counter);
			font-weight: bold;
			color: #007acc;
			display: block;
			margin-bottom: 0.5rem;
		}
		.feature-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
			gap: 1.5rem;
			margin-top: 1.5rem;
		}
		.feature-card {
			background: white;
			padding: 1.5rem;
			border-radius: 8px;
			text-align: center;
			box-shadow: 0 2px 10px rgba(0,0,0,0.1);
		}
		.feature-icon {
			font-size: 2.5rem;
			color: #007acc;
			margin-bottom: 1rem;
		}
		.faq-item {
			margin-bottom: 1.5rem;
			background: white;
			border-radius: 8px;
			padding: 1rem;
		}
		.faq-question {
			font-weight: bold;
			color: #007acc;
			margin-bottom: 0.5rem;
		}
		.faq-answer {
			color: #666;
			line-height: 1.6;
		}
		@media (max-width: 768px) {
			.tool-container {
				padding: 1rem;
			}
			.action-buttons {
				flex-direction: column;
			}
			.preview-grid {
				grid-template-columns: 1fr;
			}
			.preview-comparison {
				grid-template-columns: 1fr;
			}
			.setting-row {
				grid-template-columns: 1fr;
			}
		}
	</style>
</head>
<body class="is-preload">
	<!-- Wrapper -->
	<div id="wrapper">
		<!-- Header -->
		<header id="header">
			<h1><a href="../../index.html">ITMagical</a></h1>
			<nav id="nav">
				<ul>
					<li><a href="../../index.html">首页</a></li>
					<li>
						<a href="#" class="icon solid fa-angle-down">工具分类</a>
						<ul>
							<li><a href="../index.html#image-tools">图片工具</a></li>
							<li><a href="../index.html#convert-tools">格式转换</a></li>
							<li><a href="../index.html#media-tools">媒体工具</a></li>
							<li><a href="../index.html#utility-tools">实用工具</a></li>
							<li><a href="../index.html#document-tools">文档工具</a></li>
						</ul>
					</li>
					<li><a href="../update-log.html">更新日志</a></li>
					<li><a href="../index.html#about">关于我们</a></li>
				</ul>
			</nav>
		</header>

		<!-- Main -->
		<div id="main" class="wrapper style1">
			<div class="container">
				<header class="major">
					<h1>图片加边框工具</h1>
					<p>一键批量对图片添加内外边框或图片留白处理，多种边框样式，自定义颜色和宽度</p>
				</header>

				<div class="tool-container">
					<!-- 文件上传区域 -->
					<div class="upload-area" id="uploadArea">
						<div class="upload-icon">🖼️</div>
						<h3>选择或拖拽图片文件</h3>
						<p>支持 JPG、PNG、GIF、WebP 格式，最大 10MB</p>
						<input type="file" id="fileInput" multiple accept="image/*" style="display: none;">
						<button class="btn btn-primary" onclick="document.getElementById('fileInput').click()">选择文件</button>
					</div>

					<!-- 边框设置面板 -->
					<div class="settings-panel" id="settingsPanel" style="display: none;">
						<h3>边框设置</h3>
						<div class="setting-group">
							<label>选择边框类型：</label>
							<div class="border-style-preview" id="borderStylePreview">
								<div class="border-style-option selected" data-type="solid">
									<div class="preview-box" style="border: 3px solid #333;"></div>
									<div>实线边框</div>
								</div>
								<div class="border-style-option" data-type="dashed">
									<div class="preview-box" style="border: 3px dashed #333;"></div>
									<div>虚线边框</div>
								</div>
								<div class="border-style-option" data-type="dotted">
									<div class="preview-box" style="border: 3px dotted #333;"></div>
									<div>点线边框</div>
								</div>
								<div class="border-style-option" data-type="double">
									<div class="preview-box" style="border: 3px double #333;"></div>
									<div>双线边框</div>
								</div>
								<div class="border-style-option" data-type="padding">
									<div class="preview-box" style="background: #333; padding: 5px;"><div style="background: #f0f0f0; width: 100%; height: 100%;"></div></div>
									<div>留白边框</div>
								</div>
							</div>
						</div>
						<div class="setting-row">
							<div class="setting-group">
								<label for="borderWidth">边框宽度：<span id="borderWidthDisplay">10</span>px</label>
								<input type="range" id="borderWidth" min="1" max="50" value="10">
							</div>
							<div class="setting-group">
								<label for="borderColor">边框颜色：</label>
								<div class="color-input-group">
									<input type="color" id="borderColor" value="#000000">
									<input type="text" id="borderColorText" value="#000000">
								</div>
							</div>
						</div>
						<div class="setting-row">
							<div class="setting-group">
								<label for="outputFormat">输出格式：</label>
								<select id="outputFormat">
									<option value="png">PNG (推荐)</option>
									<option value="jpg">JPG</option>
									<option value="webp">WebP</option>
								</select>
							</div>
							<div class="setting-group">
								<label for="quality">图片质量：<span id="qualityDisplay">90</span>%</label>
								<input type="range" id="quality" min="10" max="100" value="90">
							</div>
						</div>
					</div>

					<!-- 进度条 -->
					<div class="progress-bar" id="progressBar">
						<div class="progress-fill" id="progressFill"></div>
					</div>

					<!-- 预览区域 -->
					<div class="preview-grid" id="previewGrid"></div>

					<!-- 操作按钮 -->
					<div class="action-buttons" id="actionButtons" style="display: none;">
						<button class="btn btn-success" id="processBtn">开始处理</button>
						<button class="btn btn-primary" id="downloadAllBtn" style="display: none;">下载全部</button>
						<button class="btn btn-secondary" id="resetBtn">重新开始</button>
					</div>
				</div>

				<!-- 使用指南 -->
				<div class="guide-section">
					<h2>使用指南</h2>
					<div class="guide-steps">
						<div class="guide-step">
							<strong>上传图片：</strong>点击上传区域或拖拽图片文件到指定区域，支持批量上传多张图片。
						</div>
						<div class="guide-step">
							<strong>选择边框类型：</strong>从实线、虚线、点线、双线、留白边框中选择您喜欢的边框样式。
						</div>
						<div class="guide-step">
							<strong>调整参数：</strong>设置边框宽度、颜色，选择输出格式和图片质量。
						</div>
						<div class="guide-step">
							<strong>开始处理：</strong>点击"开始处理"按钮，系统将自动为所有图片添加边框效果。
						</div>
						<div class="guide-step">
							<strong>下载结果：</strong>处理完成后，可以单独下载每张图片或批量下载全部处理后的图片。
						</div>
					</div>
				</div>

				<!-- 工具详细介绍 -->
				<div class="intro-section">
					<h2>工具详细介绍</h2>
					<p>图片加边框工具是一款专业的图片装饰工具，能够为您的图片添加各种样式的边框效果。无论是为社交媒体图片增加视觉吸引力，还是为产品图片添加专业的展示效果，本工具都能满足您的需求。</p>
					<p>工具提供五种不同的边框类型：实线边框适合正式场合，虚线边框营造轻松氛围，点线边框增添趣味性，双线边框显得更加庄重，留白边框则为图片提供呼吸空间，让主体更加突出。</p>
					<p>支持自定义边框宽度和颜色，用户可以根据图片内容和使用场景，调整最合适的边框参数。批量处理功能让您能够同时为多张图片添加相同的边框效果，大大提高工作效率。</p>
				</div>

				<!-- 推广语 -->
				<div class="promo-section">
					<h2>为什么选择我们的图片加边框工具？</h2>
					<p>🎨 <strong>多样边框：</strong>提供5种不同的边框样式，满足各种设计需求和个人喜好。</p>
					<p>🎛️ <strong>自定义设置：</strong>支持自定义边框宽度、颜色，完全掌控边框效果。</p>
					<p>⚡ <strong>批量处理：</strong>支持同时处理多张图片，节省时间，提高工作效率。</p>
					<p>🖼️ <strong>高质量输出：</strong>保持原图清晰度，支持多种输出格式和质量设置。</p>
					<p>🔒 <strong>隐私保护：</strong>所有处理都在本地完成，图片不会上传到服务器，保护您的隐私。</p>
					<p>💰 <strong>完全免费：</strong>无需注册登录，无水印添加，所有功能完全免费使用。</p>
				</div>

				<!-- 核心优势与应用场景 -->
				<div class="advantages-section">
					<h2>核心优势与应用场景</h2>
					<div class="feature-grid">
						<div class="feature-card">
							<div class="feature-icon">📱</div>
							<h3>社交媒体</h3>
							<p>为Instagram、微博、朋友圈图片添加边框，让您的内容更加吸引眼球。</p>
						</div>
						<div class="feature-card">
							<div class="feature-icon">🛍️</div>
							<h3>电商展示</h3>
							<p>为产品图片添加专业边框，提升商品展示效果和品牌形象。</p>
						</div>
						<div class="feature-card">
							<div class="feature-icon">🖼️</div>
							<h3>艺术装饰</h3>
							<p>为艺术作品、摄影作品添加装饰边框，增强艺术表现力。</p>
						</div>
						<div class="feature-card">
							<div class="feature-icon">📄</div>
							<h3>文档设计</h3>
							<p>为报告、演示文稿中的图片添加边框，提升文档的专业性。</p>
						</div>
						<div class="feature-card">
							<div class="feature-icon">🎓</div>
							<h3>教育用途</h3>
							<p>为教学材料、课件图片添加边框，突出重点内容。</p>
						</div>
						<div class="feature-card">
							<div class="feature-icon">💼</div>
							<h3>商业应用</h3>
							<p>为宣传材料、广告图片添加边框，增强视觉冲击力。</p>
						</div>
					</div>
				</div>

				<!-- 常见问题 -->
				<div class="faq-section">
					<h2>常见问题解答</h2>
					<div class="faq-item">
						<div class="faq-question">Q: 不同边框类型有什么区别？</div>
						<div class="faq-answer">A: 实线边框线条连续清晰；虚线边框由短线段组成；点线边框由点组成；双线边框有两条平行线；留白边框是在图片周围添加纯色区域。</div>
					</div>
					<div class="faq-item">
						<div class="faq-question">Q: 如何选择合适的边框宽度？</div>
						<div class="faq-answer">A: 边框宽度应根据图片尺寸和用途来选择。小图片建议使用较细的边框（1-5px），大图片可以使用较粗的边框（10-30px）。</div>
					</div>
					<div class="faq-item">
						<div class="faq-question">Q: 边框颜色如何选择？</div>
						<div class="faq-answer">A: 可以选择与图片主色调相配的颜色，或使用对比色来突出图片。黑色和白色是最常用的边框颜色，适合大多数场景。</div>
					</div>
					<div class="faq-item">
						<div class="faq-question">Q: 留白边框和其他边框有什么不同？</div>
						<div class="faq-answer">A: 留白边框是在图片周围添加纯色区域，而不是线条。这种方式可以为图片提供呼吸空间，让主体更加突出。</div>
					</div>
					<div class="faq-item">
						<div class="faq-question">Q: 支持哪些图片格式？</div>
						<div class="faq-answer">A: 支持JPG、PNG、GIF、WebP等主流图片格式输入，输出可选择PNG、JPG或WebP格式。</div>
					</div>
					<div class="faq-item">
						<div class="faq-question">Q: 处理后的图片尺寸会改变吗？</div>
						<div class="faq-answer">A: 是的，添加边框后图片尺寸会相应增加。增加的尺寸等于边框宽度的两倍（上下左右各增加一个边框宽度）。</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Footer -->
		<footer id="footer">
			<ul class="icons">
				<li><a href="#" class="icon brands alt fa-twitter"><span class="label">Twitter</span></a></li>
				<li><a href="#" class="icon brands alt fa-facebook-f"><span class="label">Facebook</span></a></li>
				<li><a href="#" class="icon brands alt fa-linkedin-in"><span class="label">LinkedIn</span></a></li>
				<li><a href="#" class="icon brands alt fa-instagram"><span class="label">Instagram</span></a></li>
				<li><a href="#" class="icon brands alt fa-github"><span class="label">GitHub</span></a></li>
				<li><a href="mailto:contact@tool.itmagical.top" class="icon solid alt fa-envelope"><span class="label">Email</span></a></li>
			</ul>
			<ul class="copyright">
				<li>&copy; 2025 ITMagical. All rights reserved.</li>
				<li>图片加边框工具 - 一键批量对图片添加内外边框或图片留白处理专业工具</li>
			</ul>
		</footer>
	</div>

	<!-- Scripts -->
	<script src="../../assets/js/jquery.min.js"></script>
	<script src="../../assets/js/jquery.dropotron.min.js"></script>
	<script src="../../assets/js/breakpoints.min.js"></script>
	<script src="../../assets/js/util.js"></script>
	<script src="../../assets/js/main.js"></script>

	<script>
		// 全局变量
		let uploadedFiles = [];
		let processedImages = [];
		let currentBorderType = 'solid';

		// DOM元素
		const uploadArea = document.getElementById('uploadArea');
		const fileInput = document.getElementById('fileInput');
		const settingsPanel = document.getElementById('settingsPanel');
		const previewGrid = document.getElementById('previewGrid');
		const actionButtons = document.getElementById('actionButtons');
		const progressBar = document.getElementById('progressBar');
		const progressFill = document.getElementById('progressFill');
		const borderStylePreview = document.getElementById('borderStylePreview');
		const borderWidth = document.getElementById('borderWidth');
		const borderWidthDisplay = document.getElementById('borderWidthDisplay');
		const borderColor = document.getElementById('borderColor');
		const borderColorText = document.getElementById('borderColorText');
		const outputFormat = document.getElementById('outputFormat');
		const quality = document.getElementById('quality');
		const qualityDisplay = document.getElementById('qualityDisplay');
		const processBtn = document.getElementById('processBtn');
		const downloadAllBtn = document.getElementById('downloadAllBtn');
		const resetBtn = document.getElementById('resetBtn');

		// 事件监听器
		uploadArea.addEventListener('click', () => fileInput.click());
		uploadArea.addEventListener('dragover', handleDragOver);
		uploadArea.addEventListener('drop', handleDrop);
		fileInput.addEventListener('change', handleFileSelect);
		borderStylePreview.addEventListener('click', handleBorderStyleSelect);
		borderWidth.addEventListener('input', () => {
			borderWidthDisplay.textContent = borderWidth.value;
		});
		borderColor.addEventListener('input', () => {
			borderColorText.value = borderColor.value;
		});
		borderColorText.addEventListener('input', () => {
			if (/^#[0-9A-F]{6}$/i.test(borderColorText.value)) {
				borderColor.value = borderColorText.value;
			}
		});
		quality.addEventListener('input', () => {
			qualityDisplay.textContent = quality.value;
		});
		processBtn.addEventListener('click', processImages);
		downloadAllBtn.addEventListener('click', downloadAll);
		resetBtn.addEventListener('click', resetTool);

		// 拖拽处理
		function handleDragOver(e) {
			e.preventDefault();
			uploadArea.classList.add('dragover');
		}

		function handleDrop(e) {
			e.preventDefault();
			uploadArea.classList.remove('dragover');
			const files = Array.from(e.dataTransfer.files).filter(file => file.type.startsWith('image/'));
			handleFiles(files);
		}

		// 文件选择处理
		function handleFileSelect(e) {
			const files = Array.from(e.target.files);
			handleFiles(files);
		}

		// 处理文件
		function handleFiles(files) {
			if (files.length === 0) return;

			// 验证文件
			const validFiles = files.filter(file => {
				if (!file.type.startsWith('image/')) {
					alert(`文件 ${file.name} 不是有效的图片格式`);
					return false;
				}
				if (file.size > 10 * 1024 * 1024) {
					alert(`文件 ${file.name} 超过10MB大小限制`);
					return false;
				}
				return true;
			});

			if (validFiles.length === 0) return;

			uploadedFiles = [...uploadedFiles, ...validFiles];
			displayPreviews();
			showSettings();
		}

		// 显示预览
		function displayPreviews() {
			previewGrid.innerHTML = '';
			uploadedFiles.forEach((file, index) => {
				const reader = new FileReader();
				reader.onload = (e) => {
					const previewItem = document.createElement('div');
					previewItem.className = 'preview-item';
					previewItem.innerHTML = `
						<button class="remove-btn" onclick="removeFile(${index})">&times;</button>
						<img src="${e.target.result}" alt="原图">
						<div class="filename">${file.name}</div>
						<div class="file-info">${(file.size / 1024 / 1024).toFixed(2)} MB</div>
					`;
					previewGrid.appendChild(previewItem);
				};
				reader.readAsDataURL(file);
			});
		}

		// 移除文件
		function removeFile(index) {
			uploadedFiles.splice(index, 1);
			if (uploadedFiles.length === 0) {
				hideSettings();
			} else {
				displayPreviews();
			}
		}

		// 显示设置面板
		function showSettings() {
			settingsPanel.style.display = 'block';
			actionButtons.style.display = 'flex';
		}

		// 隐藏设置面板
		function hideSettings() {
			settingsPanel.style.display = 'none';
			actionButtons.style.display = 'none';
			previewGrid.innerHTML = '';
		}

		// 边框样式选择处理
		function handleBorderStyleSelect(e) {
			const styleOption = e.target.closest('.border-style-option');
			if (!styleOption) return;

			// 更新选中状态
			document.querySelectorAll('.border-style-option').forEach(option => {
				option.classList.remove('selected');
			});
			styleOption.classList.add('selected');

			// 更新当前边框类型
			currentBorderType = styleOption.dataset.type;
		}

		// 处理图片
		async function processImages() {
			if (uploadedFiles.length === 0) {
				alert('请先上传图片文件');
				return;
			}

			processBtn.disabled = true;
			progressBar.style.display = 'block';
			processedImages = [];

			for (let i = 0; i < uploadedFiles.length; i++) {
				const file = uploadedFiles[i];
				try {
					const processedImage = await processImage(file);
					processedImages.push(processedImage);
					updateProgress((i + 1) / uploadedFiles.length * 100);
				} catch (error) {
					console.error(`处理图片 ${file.name} 时出错:`, error);
					alert(`处理图片 ${file.name} 时出错，请重试`);
				}
			}

			processBtn.disabled = false;
			progressBar.style.display = 'none';
			downloadAllBtn.style.display = 'inline-block';
			displayProcessedImages();
		}

		// 处理单张图片
		function processImage(file) {
			return new Promise((resolve, reject) => {
				const img = new Image();
				img.onload = () => {
					try {
						const borderWidthValue = parseInt(borderWidth.value);
						const borderColorValue = borderColor.value;
						
						const canvas = document.createElement('canvas');
						const ctx = canvas.getContext('2d');

						// 计算新的画布尺寸
						let newWidth, newHeight;
						if (currentBorderType === 'padding') {
							// 留白边框：增加边框宽度
							newWidth = img.width + borderWidthValue * 2;
							newHeight = img.height + borderWidthValue * 2;
						} else {
							// 线条边框：增加边框宽度
							newWidth = img.width + borderWidthValue * 2;
							newHeight = img.height + borderWidthValue * 2;
						}

						// 设置画布尺寸
						canvas.width = newWidth;
						canvas.height = newHeight;

						// 绘制边框
						if (currentBorderType === 'padding') {
							// 留白边框：填充背景色
							ctx.fillStyle = borderColorValue;
							ctx.fillRect(0, 0, newWidth, newHeight);
							// 绘制图片
							ctx.drawImage(img, borderWidthValue, borderWidthValue);
						} else {
							// 线条边框：先绘制图片
							ctx.drawImage(img, borderWidthValue, borderWidthValue);
							// 绘制边框
							ctx.strokeStyle = borderColorValue;
							ctx.lineWidth = borderWidthValue;
							
							// 设置线条样式
							switch (currentBorderType) {
								case 'solid':
									ctx.setLineDash([]);
									break;
								case 'dashed':
									ctx.setLineDash([borderWidthValue * 2, borderWidthValue]);
									break;
								case 'dotted':
									ctx.setLineDash([borderWidthValue / 2, borderWidthValue / 2]);
									break;
								case 'double':
									// 绘制双线边框
									ctx.setLineDash([]);
									const outerOffset = borderWidthValue / 2;
									const innerOffset = borderWidthValue / 6;
									ctx.lineWidth = borderWidthValue / 3;
									// 外边框
									ctx.strokeRect(outerOffset, outerOffset, newWidth - borderWidthValue, newHeight - borderWidthValue);
									// 内边框
									ctx.strokeRect(borderWidthValue - innerOffset, borderWidthValue - innerOffset, 
										newWidth - 2 * (borderWidthValue - innerOffset), newHeight - 2 * (borderWidthValue - innerOffset));
									break;
							}
							
							if (currentBorderType !== 'double') {
								ctx.strokeRect(borderWidthValue / 2, borderWidthValue / 2, 
									newWidth - borderWidthValue, newHeight - borderWidthValue);
							}
						}

						// 转换为blob
						const format = outputFormat.value;
						const qualityValue = quality.value / 100;
						const mimeType = format === 'jpg' ? 'image/jpeg' : `image/${format}`;

						canvas.toBlob((blob) => {
							const processedFile = {
								originalName: file.name,
								processedName: `bordered_${file.name.split('.')[0]}.${format}`,
								blob: blob,
								originalUrl: URL.createObjectURL(file),
								processedUrl: URL.createObjectURL(blob)
							};
							resolve(processedFile);
						}, mimeType, qualityValue);
					} catch (error) {
						reject(error);
					}
				};
				img.onerror = () => reject(new Error('图片加载失败'));
				img.src = URL.createObjectURL(file);
			});
		}

		// 更新进度
		function updateProgress(percent) {
			progressFill.style.width = percent + '%';
		}

		// 显示处理后的图片
		function displayProcessedImages() {
			previewGrid.innerHTML = '';
			processedImages.forEach((processedImage, index) => {
				const previewItem = document.createElement('div');
				previewItem.className = 'preview-item';
				previewItem.innerHTML = `
					<div class="preview-comparison">
						<div>
							<div class="preview-label">原图</div>
							<img src="${processedImage.originalUrl}" alt="原图">
						</div>
						<div>
							<div class="preview-label">处理后</div>
							<img src="${processedImage.processedUrl}" alt="处理后">
						</div>
					</div>
					<div class="filename">${processedImage.processedName}</div>
					<button class="btn btn-primary" onclick="downloadSingle(${index})">下载</button>
				`;
				previewGrid.appendChild(previewItem);
			});
		}

		// 下载单张图片
		function downloadSingle(index) {
			const processedImage = processedImages[index];
			const link = document.createElement('a');
			link.href = processedImage.processedUrl;
			link.download = processedImage.processedName;
			link.click();
		}

		// 下载全部图片
		function downloadAll() {
			processedImages.forEach((processedImage, index) => {
				setTimeout(() => {
					downloadSingle(index);
				}, index * 100);
			});
		}

		// 重置工具
		function resetTool() {
			uploadedFiles = [];
			processedImages = [];
			fileInput.value = '';
			hideSettings();
			downloadAllBtn.style.display = 'none';
			progressBar.style.display = 'none';
			progressFill.style.width = '0%';
			
			// 重置设置为默认值
			borderWidth.value = 10;
			borderWidthDisplay.textContent = '10';
			borderColor.value = '#000000';
			borderColorText.value = '#000000';
			outputFormat.value = 'png';
			quality.value = 90;
			qualityDisplay.textContent = '90';
			
			// 重置边框类型选择
			document.querySelectorAll('.border-style-option').forEach(option => {
				option.classList.remove('selected');
			});
			document.querySelector('.border-style-option[data-type="solid"]').classList.add('selected');
			currentBorderType = 'solid';
		}
	</script>

	<!-- 结构化数据 -->
	<script type="application/ld+json">
	{
		"@context": "https://schema.org",
		"@type": "WebApplication",
		"name": "图片加边框工具",
		"description": "免费在线图片加边框工具，支持批量添加内外边框，图片留白处理，多种边框样式，自定义颜色和宽度",
		"url": "https://tool.itmagical.top/tools/图片加边框工具.html",
		"applicationCategory": "MultimediaApplication",
		"operatingSystem": "Any",
		"permissions": "browser",
		"offers": {
			"@type": "Offer",
			"price": "0",
			"priceCurrency": "USD"
		},
		"creator": {
			"@type": "Organization",
			"name": "ITMagical",
			"url": "https://tool.itmagical.top"
		},
		"featureList": [
			"批量图片边框添加",
			"多种边框样式",
			"自定义边框颜色和宽度",
			"留白边框处理",
			"高质量输出",
			"隐私保护"
		]
	}
	</script>

</body>
</html>
